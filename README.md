状态模式，观察者模式